<!DOCTYPE html>
<html>
<head>
<title>Sample HTML</title>
</head>
<body>

<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Peta Rawan Bencana Banjir - Aceh, Sumatera Utara, Sumatera Barat</title>

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@400;600;700&family=Source+Sans+Pro:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Source Sans Pro', sans-serif;
            background: #e8f4f8;
        }

        .map-wrapper {
            max-width: 1800px;
            margin: 0 auto;
            background: white;
            box-shadow: 0 8px 32px rgba(0,0,0,0.15);
        }

        .map-header {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            color: white;
            padding: 25px 40px;
            text-align: center;
            border-bottom: 4px solid #1e40af;
        }

        .map-header h1 {
            font-family: 'Crimson Pro', serif;
            font-size: 32px;
            font-weight: 700;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .map-header .subtitle {
            font-size: 15px;
            opacity: 0.95;
            font-weight: 600;
            letter-spacing: 1px;
        }

        #map {
            height: 800px;
            width: 100%;
            position: relative;
            background: #aadaff;
        }

        .info-overlay {
            position: absolute;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid #1e40af;
            border-radius: 8px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.3);
            max-width: 350px;
            backdrop-filter: blur(10px);
        }

        .stats-panel {
            top: 20px;
            left: 20px;
            padding: 20px;
        }

        .stats-title {
            font-family: 'Crimson Pro', serif;
            font-size: 18px;
            font-weight: 700;
            color: #1e3a8a;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #3b82f6;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #e5e7eb;
            font-size: 14px;
        }

        .stat-item:last-child {
            border-bottom: none;
        }

        .stat-label {
            font-weight: 600;
            color: #4b5563;
        }

        .stat-value {
            font-weight: 700;
            color: #dc2626;
            font-size: 15px;
        }

        .legend-panel {
            bottom: 20px;
            right: 20px;
            padding: 20px;
        }

        .legend-title {
            font-family: 'Crimson Pro', serif;
            font-size: 16px;
            font-weight: 700;
            color: #1e3a8a;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid #3b82f6;
        }

        .legend-section {
            margin-bottom: 15px;
        }

        .legend-section-title {
            font-size: 12px;
            font-weight: 700;
            color: #1e3a8a;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
            font-size: 13px;
        }

        .legend-color {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: 2px solid rgba(0,0,0,0.2);
            flex-shrink: 0;
        }

        .legend-circle {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: 2px solid;
            flex-shrink: 0;
            opacity: 0.6;
        }

        .footer-info {
            background: #f9fafb;
            padding: 20px 40px;
            border-top: 2px solid #1e40af;
            font-size: 12px;
            color: #4b5563;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .footer-info strong {
            color: #1e3a8a;
        }

        /* Custom Leaflet Popup */
        .leaflet-popup-content-wrapper {
            border-radius: 8px;
            border: 2px solid #dc2626;
        }

        .leaflet-popup-content {
            margin: 15px;
            font-family: 'Source Sans Pro', sans-serif;
            min-width: 200px;
        }

        .popup-title {
            font-size: 16px;
            font-weight: 700;
            color: #1e3a8a;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 2px solid #dc2626;
        }

        .popup-detail {
            font-size: 13px;
            margin-bottom: 6px;
            display: flex;
            justify-content: space-between;
            gap: 15px;
        }

        .popup-label {
            font-weight: 600;
            color: #4b5563;
        }

        .popup-value {
            font-weight: 700;
            color: #dc2626;
        }

        .severity-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-top: 8px;
        }

        .severity-critical {
            background: #dc2626;
            color: white;
        }

        .severity-high {
            background: #f97316;
            color: white;
        }

        .severity-medium {
            background: #fbbf24;
            color: #1a1a1a;
        }

        .severity-low {
            background: #42bd3e;
            color: #1a1a1a;
        }

        /* Search panel for campus */
        .search-panel {
            top: 20px;
            right: 20px;
            padding: 16px;
            width: 300px;
        }

        .search-input {
            width: 100%;
            padding: 8px 10px;
            border-radius: 6px;
            border: 1px solid #d1d5db;
            font-size: 13px;
            outline: none;
            margin-bottom: 8px;
        }

        .search-input:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 1px rgba(59, 130, 246, 0.4);
        }

        .search-results {
            max-height: 260px;
            overflow-y: auto;
            margin-top: 4px;
        }

        .search-result-item {
            padding: 6px 8px;
            border-radius: 6px;
            cursor: pointer;
            margin-bottom: 4px;
            border: 1px solid transparent;
            background: white;
        }

        .search-result-item:hover {
            background: #eff6ff;
            border-color: #bfdbfe;
        }

        .search-result-name {
            font-size: 13px;
            font-weight: 600;
            color: #1f2933;
        }

        .search-result-meta {
            font-size: 11px;
            color: #6b7280;
        }

        .search-result-empty {
            font-size: 12px;
            color: #9ca3af;
            text-align: center;
            padding: 8px 0;
        }

        .popup-coverage {
            font-size: 12px;
            margin-top: 4px;
            color: #374151;
        }

        /* Tooltip circle kampus */
        .campus-circle-tooltip {
            background: rgba(15, 23, 42, 0.9);
            color: #f9fafb;
            border-radius: 999px;
            padding: 4px 10px;
            border: 1px solid rgba(148, 163, 184, 0.6);
            font-size: 11px;
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .info-overlay {
                max-width: 280px;
            }

            #map {
                height: 600px;
            }
        }
    </style>
</head>
<body>
    <div class="map-wrapper">
        <div class="map-header">
            <h1>PETA RAWAN BENCANA HIDROMETEOROLOGI</h1>
            <div class="subtitle">PROVINSI ACEH • SUMATERA UTARA • SUMATERA BARAT — NOVEMBER 2025</div>
        </div>

        <div id="map">
            <!-- Stats Panel -->
            <div class="info-overlay stats-panel">
                <div class="stats-title">Data Bencana November 2025</div>
                <div class="stat-item">
                    <span class="stat-label">Total Korban Meninggal:</span>
                    <span class="stat-value">303 jiwa</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Korban Hilang:</span>
                    <span class="stat-value">194 jiwa</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Kabupaten Terdampak:</span>
                    <span class="stat-value">42+</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Pengungsi:</span>
                    <span class="stat-value">50,000+ jiwa</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Status:</span>
                    <span class="stat-value">Darurat Bencana</span>
                </div>
            </div>

            <!-- Legend Panel -->
            <div class="info-overlay legend-panel">
                <div class="legend-title">Legenda</div>

                <div class="legend-section">
                    <div class="legend-section-title">Tingkat Keparahan Bencana</div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #dc2626;"></div>
                        <span style="color: #160b54;"><strong>Kritis:</strong> &gt;15 korban</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #f97316;"></div>
                        <span style="color: #160b54;"><strong>Tinggi:</strong> 8–15 korban</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #fbbf24;"></div>
                        <span style="color: #160b54;"><strong>Sedang:</strong> 3–7 korban</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #42bd3e;"></div>
                        <span style="color: #160b54;"><strong>Rendah:</strong> 1–2 korban</span>
                    </div>
                </div>

                <div class="legend-section">
                    <div class="legend-section-title">Jumlah Kontribusi Kampus Posko</div>
                    <div class="legend-item" style="align-items:flex-start;">
                        <div class="legend-circle" style="border-color:#0ea5e9; background: rgba(14,165,233,0.08);"></div>
                        <span style="color: #160b54;">Setiap lingkaran berwarna biru mengindikasikan daerah dengan dukungan Kampus Posko</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-custom-campus-icon" style="width: 18px; height: 18px; background: #160b54; border: 1px solid white; box-shadow: 0 1px 2px rgba(0,0,0,0.4);"></div>
                        <span style="color: #160b54;">Kampus Posko</strong></span>
                </div>
            </div>
                
        <div class="footer-info">
            <div>
                <strong>Sumber Data:</strong> BNPB, BPBD Aceh, BPBD Sumatera Utara, BPBD Sumatera Barat |
                <strong>Periode:</strong> 19–27 November 2025
            </div>
            <div>
                <strong>Update Terakhir:</strong> 29 Nov 2025, 17:00 WIB
            </div>
        </div>
    </div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <script>
        // =========================
        // DATA LOKASI BENCANA
        // =========================
        const disasterLocations = [
  {
    name: "Kota Sabang",
    province: "Aceh",
    lat: 5.8933,
    lng: 95.3214,
    incidentType: "Banjir",
    date: "26-11-2025",
    deaths: 0,
    missing: 0,
    injured: 0,
    displaced: 0,
    affected: 0,
    severity: "low",
    details: {
      kecamatanTerdampak: 2,
      desaKelurahanGampongTerdampak: null,
      jiwaMengungsi: null,
      jiwaTerdampak: null,
      catatan: "Korban dan kerugian masih dalam pendataan."
    }
  },
  {
    name: "Kab. Bireuen",
    province: "Aceh",
    lat: 5.203,
    lng: 96.701,
    incidentType: "Banjir",
    date: "2-12-2025",
    deaths: 11,
    missing: 4,
    injured: 0,
    displaced: 54517,
    affected: 3869,
    severity: "high",
    details: {
      kecamatanTerdampak: 17
    }
  },
  {
    name: "Kab. Aceh Tamiang",
    province: "Aceh",
    lat: 4.2325,
    lng: 97.958,
    incidentType: "Banjir",
    date: "2-12-2025",
    deaths: 0,
    missing: 0,
    injured: 3,
    displaced: 10293,
    affected: 310480,
    severity: "high",
    details: {
      kecamatanTerdampak: 12
    }
  },
  {
    name: "Kab. Aceh Timur",
    province: "Aceh",
    lat: 4.7396,
    lng: 97.8544,
    incidentType: "Banjir",
    date: "2-12-2025",
    deaths: 8,
    missing: 1,
    injured: 0,
    displaced: 104973,
    affected: 135064,
    severity: "high",
    details: {
      kecamatanTerdampak: 24
    }
  },
  {
    name: "Kota Lhokseumawe (Longsor)",
    province: "Aceh",
    lat: 5.1833,
    lng: 97.15,
    incidentType: "Longsor",
    date: "26-11-2025",
    deaths: 0,
    missing: 0,
    injured: 0,
    displaced: 0,
    affected: 0,
    severity: "high",
    details: {
      kecamatanTerdampak: 1,
      desaKelurahanGampongTerdampak: 4,
      catatan: "Longsor, 4 desa terdampak."
    }
  },
  {
    name: "Kota Lhokseumawe (Banjir)",
    province: "Aceh",
    lat: 5.1833,
    lng: 97.15,
    incidentType: "Banjir",
    date: "26-11-2025",
    deaths: 1,
    missing: 3,
    injured: 0,
    displaced: 2500,
    affected: 2500,
    severity: "high",
    details: {
      kecamatanTerdampak: 4,
      jiwaMengungsi: 2500,
      jiwaTerdampak: 2500,
      catatan: "1 jiwa meninggal, 3 jiwa hilang, 2.500 jiwa mengungsi."
    }
  },
  {
    name: "Kota Langsa",
    province: "Aceh",
    lat: 4.4683,
    lng: 97.9683,
    incidentType: "Longsor",
    date: "25-11-2025",
    deaths: 0,
    missing: 0,
    injured: 0,
    displaced: 420,
    affected: 420,
    severity: "medium",
    details: {
      kecamatanTerdampak: 5,
      gampongTerdampak: 1,
      jiwaTerdampak: 420,
      rumahTerdampak: 110,
      catatan: "1 gampong terdampak, 420 jiwa terdampak, 110 rumah terdampak."
    }
  },
  {
    name: "Kab. Aceh Utara",
    province: "Aceh",
    lat: 5.0167,
    lng: 97.3333,
    incidentType: "Banjir",
    date: "20-11-2025",
    deaths: 0,
    missing: 0,
    injured: 0,
    displaced: 44350,
    affected: 44350,
    severity: "high",
    details: {
      kecamatanTerdampak: 19,
      gampongTerdampak: 140,
      jiwaMengungsi: 44350,
      rumahTerdampak: 17742,
      rumahRusak: 12,
      jembatanRusak: 3,
      lahanSawahHaTerdampak: 420,
      tambakTerdampak: 571,
      catatan: "140 gampong terdampak, 2.736 KK terdampak, 44.350 jiwa mengungsi; kerusakan signifikan pada rumah, sawah, tambak, dan infrastruktur."
    }
  },
  {
    name: "Kab. Gayo Lues",
    province: "Aceh",
    lat: 3.955,
    lng: 97.351,
    incidentType: "Banjir & Longsor",
    date: "25-11-2025",
    deaths: 2,
    missing: 1,
    injured: 0,
    displaced: 2896,
    affected: 5074,
    severity: "medium",
    details: {
      kecamatanTerdampak: 12,
      desaNagariTerdampak: 54,
      jiwaMengungsi: 2896,
      jiwaTerdampak: 5074,
      jembatanRusak: 8,
      fasdikRusak: 3,
      catatan: "54 desa terdampak, 2 meninggal, 1 hilang, 2.896 jiwa mengungsi, 2.178 jiwa terdampak, 8 jembatan dan 3 fasilitas pendidikan rusak."
    }
  },
  {
    name: "Kab. Aceh Tengah",
    province: "Aceh",
    lat: 4.448,
    lng: 96.8351,
    incidentType: "Banjir & Longsor",
    date: "26-11-2025",
    deaths: 2,
    missing: 1,
    injured: 0,
    displaced: 0,
    affected: 24416,
    severity: "medium",
    details: {
      kecamatanTerdampak: 11,
      jiwaTerdampak: 24416,
      catatan: "24.416 jiwa terdampak, 2 meninggal, 1 hilang."
    }
  },
  {
    name: "Kota Subulussalam",
    province: "Aceh",
    lat: 2.6442,
    lng: 97.9754,
    incidentType: "Banjir",
    date: "26-11-2025",
    deaths: 1,
    missing: 0,
    injured: 0,
    displaced: 1706,
    affected: 1706,
    severity: "medium",
    details: {
      kecamatanTerdampak: 5,
      desaKelurahanGampongTerdampak: 18,
      jiwaMengungsi: 1706,
      jiwaTerdampak: 1706,
      catatan: "18 desa terdampak, 1 meninggal, 1.706 jiwa mengungsi."
    }
  },
  {
    name: "Kab. Bener Meriah",
    province: "Aceh",
    lat: 4.76,
    lng: 96.8333,
    incidentType: "Banjir & Longsor",
    date: "27-11-2025",
    deaths: 1,
    missing: 0,
    injured: 0,
    displaced: 21464,
    affected: 21464,
    severity: "high",
    details: {
      kecamatanTerdampak: 4,
      desaKelurahanGampongTerdampak: 13,
      kkMengungsi: 5366,
      perkiraanJiwaMengungsi: 21464,
      catatan: "13 desa terdampak, 1 meninggal, 5.366 KK mengungsi (perkiraan jiwa dikali 4 per KK)."
    }
  },
  {
    name: "Kab. Aceh Singkil",
    province: "Aceh",
    lat: 2.358,
    lng: 97.905,
    incidentType: "Banjir",
    date: "19-11-2025",
    deaths: 0,
    missing: 0,
    injured: 0,
    displaced: 21143,
    affected: 21143,
    severity: "high",
    details: {
      kecamatanTerdampak: 9,
      desaKelurahanGampongTerdampak: 45,
      jiwaMengungsi: 21143,
      rumahTerdampak: 6069,
      catatan: "9 kecamatan, 45 desa, 21.143 jiwa mengungsi, 6.069 rumah terdampak."
    }
  },
  {
    name: "Kab. Simeulue",
    province: "Aceh",
    lat: 2.5833,
    lng: 96.0833,
    incidentType: "Banjir",
    date: "25-11-2025",
    deaths: 0,
    missing: 0,
    injured: 0,
    displaced: 0,
    affected: 0,
    severity: "low",
    details: {
      kecamatanTerdampak: 12,
      catatan: "Data korban dan kerusakan masih dalam pendataan."
    }
  },
  {
    name: "Kab. Aceh Barat",
    province: "Aceh",
    lat: 4.45,
    lng: 96.1167,
    incidentType: "Banjir",
    date: "26-11-2025",
    deaths: 0,
    missing: 0,
    injured: 0,
    displaced: 3866,
    affected: 3866,
    severity: "medium",
    details: {
      kecamatanTerdampak: 12,
      gampongTerdampak: 58,
      jiwaTerdampak: 3866,
      catatan: "58 gampong terdampak, 3.866 jiwa terdampak."
    }
  },
  {
    name: "Kab. Pidie Jaya",
    province: "Aceh",
    lat: 5.1552,
    lng: 96.1951,
    incidentType: "Banjir",
    date: "25-11-2025",
    deaths: 4,
    missing: 4,
    injured: 0,
    displaced: 11999,
    affected: 11999,
    severity: "medium",
    details: {
      kecamatanTerdampak: 2,
      jiwaMengungsi: 11999,
      catatan: "4 jiwa meninggal, 4 hilang, 11.999 jiwa mengungsi."
    }
  },
  {
    name: "Kab. Pidie",
    province: "Aceh",
    lat: 5.3833,
    lng: 95.95,
    incidentType: "Banjir",
    date: "27-11-2025",
    deaths: 0,
    missing: 0,
    injured: 0,
    displaced: 16304,
    affected: 16304,
    severity: "medium",
    details: {
      kecamatanTerdampak: 8,
      gampongTerdampak: 24,
      jiwaMengungsi: 16304,
      lahanSawahHaTerdampak: 55,
      catatan: "24 gampong terdampak, 16.304 jiwa mengungsi, 55 ha sawah terdampak."
    }
  },
  {
    name: "Kab. Aceh Besar",
    province: "Aceh",
    lat: 5.5095,
    lng: 95.358,
    incidentType: "Banjir",
    date: "27-11-2025",
    deaths: 0,
    missing: 0,
    injured: 0,
    displaced: 824,
    affected: 5514,
    severity: "medium",
    details: {
      kecamatanTerdampak: 8,
      jiwaMengungsi: 824,
      jiwaTerdampak: 5514,
      rumahTerdampak: 374,
      catatan: "824 jiwa mengungsi, 5.514 jiwa terdampak, 374 rumah terdampak."
    }
  },
  {
    name: "Kab. Aceh Selatan",
    province: "Aceh",
    lat: 3.0951,
    lng: 97.351,
    incidentType: "Banjir",
    date: "20-11-2025",
    deaths: 0,
    missing: 0,
    injured: 0,
    displaced: 3106,
    affected: 3106,
    severity: "medium",
    details: {
      kecamatanTerdampak: 16,
      gampongTerdampak: 24,
      jiwaMengungsi: 3106,
      rumahTerdampak: 878,
      catatan: "24 gampong terdampak, 3.106 jiwa mengungsi, 878 rumah terdampak."
    }
  },
  {
    name: "Kab. Aceh Tenggara",
    province: "Aceh",
    lat: 3.185,
    lng: 97.6982,
    incidentType: "Banjir",
    date: "20-11-2025",
    deaths: 7,
    missing: 25,
    injured: 5,
    displaced: 894,
    affected: 894,
    severity: "high",
    details: {
      kecamatanTerdampak: 14,
      jiwaMengungsi: 894,
      catatan: "7 jiwa meninggal, 5 luka-luka, 25 hilang, 894 jiwa mengungsi."
    }
  },

  // =========================
  // SUMATERA UTARA
  // =========================
  {
    name: "Kab. Pakpak Bharat",
    province: "Sumatera Utara",
    lat: 2.552,
    lng: 98.27,
    incidentType: "Banjir & Longsor",
    date: "25-11-2025",
    deaths: 2,
    missing: 0,
    injured: 0,
    displaced: 0,
    affected: 0,
    severity: "medium",
    details: {
      kecamatanTerdampak: 6,
      rumahRusakBerat: 2,
      rumahRusakRingan: 1,
      titikJalanTerdampak: 1,
      catatan: "6 kecamatan terdampak; 2 meninggal; 2 rumah rusak berat, 1 rumah rusak ringan, 1 titik jalan terdampak."
    }
  },
  {
    name: "Kab. Humbang Hasundutan",
    province: "Sumatera Utara",
    lat: 2.1973,
    lng: 98.5369,
    incidentType: "Banjir Bandang",
    date: "25-11-2025",
    deaths: 5,
    missing: 4,
    injured: 8,
    displaced: 2848,
    affected: 2848,
    severity: "high",
    details: {
      kecamatanTerdampak: 2,
      kkMengungsi: 712,
      perkiraanJiwaMengungsi: 2848,
      rumahRusakBerat: 35,
      rumahRusakSedang: 35,
      rumahRusakRingan: 89,
      fasumRusak: 1,
      titikJalanTerdampak: 1,
      catatan: "Banjir bandang di 2 kecamatan; 5 meninggal, 4 hilang, 8 luka-luka; 712 KK mengungsi; kerusakan banyak rumah dan fasilitas umum."
    }
  },
  {
    name: "Kab. Tapanuli Utara",
    province: "Sumatera Utara",
    lat: 2.0444,
    lng: 98.9322,
    incidentType: "Banjir & Longsor",
    date: "25-11-2025",
    deaths: 11,
    missing: 5,
    injured: 0,
    displaced: 2400,
    affected: 2400,
    severity: "critical",
    details: {
      kecamatanTerdampak: 7,
      kkMengungsi: 600,
      perkiraanJiwaMengungsi: 2400,
      rumahRusakBerat: 5,
      rumahRusakSedang: 64,
      titikJalanTerdampak: 1,
      jembatanRusak: 1,
      catatan: "7 kecamatan terdampak; 11 meninggal, 5 hilang; 600 KK mengungsi; rumah dan jembatan rusak."
    }
  },
  {
    name: "Kab. Tapanuli Tengah",
    province: "Sumatera Utara",
    lat: 1.729,
    lng: 98.785,
    incidentType: "Banjir & Longsor",
    date: "25-11-2025",
    deaths: 55,
    missing: 54,
    injured: 507,
    displaced: 4400,
    affected: 4400,
    severity: "critical",
    details: {
      kecamatanTerdampak: 13,
      kkMengungsi: 1100,
      perkiraanJiwaMengungsi: 4400,
      rumahRusakBerat: 1788,
      rumahRusakSedang: 1948,
      rumahRusakRingan: 2118,
      catatan: "13 kecamatan terdampak; 55 meninggal, 54 hilang, 507 luka-luka; 1.100 KK mengungsi; kerusakan berat pada ribuan rumah; komunikasi dan listrik padam, akses jalan terputus."
    }
  },
  {
    name: "Kab. Nias Selatan",
    province: "Sumatera Utara",
    lat: -0.708,
    lng: 97.828,
    incidentType: "Longsor & Cuaca Ekstrem",
    date: "24-11-2025",
    deaths: 0,
    missing: 0,
    injured: 0,
    displaced: 0,
    affected: 0,
    severity: "low",
    details: {
      kecamatanTerdampak: 1,
      rumahRusakBerat: 1,
      titikJalanTerdampak: 1,
      catatan: "Longsor dan cuaca ekstrem; 1 rumah rusak berat, 1 titik jalan terdampak."
    }
  },
  {
    name: "Kota Medan",
    province: "Sumatera Utara",
    lat: 3.5952,
    lng: 98.6722,
    incidentType: "Banjir",
    date: "27-11-2025",
    deaths: 0,
    missing: 0,
    injured: 0,
    displaced: 43668,
    affected: 43668,
    severity: "high",
    details: {
      kecamatanTerdampak: 14,
      kkTerdampak: 10917,
      perkiraanJiwaTerdampak: 43668,
      catatan: "Banjir di 14 kecamatan; 10.917 KK terdampak."
    }
  },
  {
    name: "DELI SERDANG",
    province: "Sumatera Utara",
    lat: 3.6952,
    lng: 98.7722,
    incidentType: "Banjir",
    date: "27-11-2025",
    deaths: 16,
    missing: 0,
    injured: 0,
    displaced: 3764,
    affected: 66.890,
    severity: "high",
    details: {}
  },
  {
    name: "Kab. Langkat",
    province: "Sumatera Utara",
    lat: 3.837,
    lng: 98.331,
    incidentType: "Banjir",
    date: "26-11-2025",
    deaths: 0,
    missing: 0,
    injured: 0,
    displaced: 4000,
    affected: 4000,
    severity: "medium",
    details: {
      kecamatanTerdampak: 4,
      jiwaTerdampak: 4000,
      catatan: "4 kecamatan terdampak, 4.000 jiwa terdampak."
    }
  },
  {
    name: "Kota Binjai",
    province: "Sumatera Utara",
    lat: 3.6,
    lng: 98.5,
    incidentType: "Banjir",
    date: "26-11-2025",
    deaths: 0,
    missing: 0,
    injured: 0,
    displaced: 24961,
    affected: 24961,
    severity: "high",
    details: {
      kecamatanTerdampak: 5,
      kelurahanTerdampak: 25,
      jiwaTerdampak: 24961,
      rumahTerdampak: 7672,
      catatan: "25 kelurahan terdampak; 24.961 jiwa dan 7.672 rumah terdampak."
    }
  },
  {
    name: "Kab. Serdang Bedagai",
    province: "Sumatera Utara",
    lat: 3.3326,
    lng: 99.0577,
    incidentType: "Banjir",
    date: "27-11-2025",
    deaths: 0,
    missing: 0,
    injured: 0,
    displaced: 575,
    affected: 575,
    severity: "medium",
    details: {
      kecamatanTerdampak: 4,
      jiwaTerdampak: 575,
      rumahTerdampak: 366,
      lahanPerkebunanHaTerdampak: 80,
      lahanHortikulturaHaTerdampak: 60,
      catatan: "4 kecamatan, 575 jiwa dan 366 rumah terdampak, kerusakan pada 80 ha perkebunan dan 60 ha hortikultura."
    }
  },
  {
    name: "Kota Tebing Tinggi",
    province: "Sumatera Utara",
    lat: 3.327,
    lng: 99.162,
    incidentType: "Banjir",
    date: "27-11-2025",
    deaths: 0,
    missing: 0,
    injured: 0,
    displaced: 13337,
    affected: 13337,
    severity: "high",
    details: {
      kecamatanTerdampak: 5,
      kelurahanTerdampak: 26,
      jiwaTerdampak: 13337,
      rumahTerdampak: 4080,
      catatan: "5 kecamatan, 26 kelurahan terdampak; 13.337 jiwa dan 4.080 rumah terdampak."
    }
  },
  {
    name: "Kota Padang Sidempuan",
    province: "Sumatera Utara",
    lat: 1.3795,
    lng: 99.2732,
    incidentType: "Banjir Bandang",
    date: "25-11-2025",
    deaths: 1,
    missing: 0,
    injured: 0,
    displaced: 960,
    affected: 960,
    severity: "medium",
    details: {
      kecamatanTerdampak: 2,
      kkMengungsi: 240,
      perkiraanJiwaMengungsi: 960,
      catatan: "Banjir bandang di 2 kecamatan; 1 jiwa meninggal, 240 KK mengungsi."
    }
  },
  {
    name: "Kab. Tapanuli Selatan",
    province: "Sumatera Utara",
    lat: 1.6094,
    lng: 99.273,
    incidentType: "Banjir & Longsor",
    date: "24-11-2025",
    deaths: 46,
    missing: 52,
    injured: 58,
    displaced: 4661,
    affected: 4661,
    severity: "critical",
    details: {
      kecamatanTerdampak: 11,
      jiwaMengungsi: 4661,
      rumahRusakBerat: 12,
      rumahRusakSedang: 6,
      rumahRusakRingan: 312,
      sekolahTerdampak: 1,
      catatan: "11 kecamatan terdampak; 46 meninggal, 52 hilang, 58 luka-luka; 4.661 jiwa mengungsi; kerusakan rumah dan 1 sekolah."
    }
  },
  {
    name: "Kota Sibolga",
    province: "Sumatera Utara",
    lat: 1.742,
    lng: 98.779,
    incidentType: "Banjir & Longsor",
    date: "25-11-2025",
    deaths: 46,
    missing: 33,
    injured: 0,
    displaced: 4456,
    affected: 4456,
    severity: "critical",
    details: {
      kecamatanTerdampak: 8,
      jiwaMengungsi: 4456,
      catatan: "8 kecamatan terdampak; 46 jiwa meninggal (perkiraan), 33 hilang, 4.456 jiwa mengungsi."
    }
  },
  {
    name: "Kab. Batu Bara",
    province: "Sumatera Utara",
    lat: 3.174,
    lng: 99.5,
    incidentType: "Banjir",
    date: "27-11-2025",
    deaths: 0,
    missing: 0,
    injured: 0,
    displaced: 7118,
    affected: 7118,
    severity: "medium",
    details: {
      kecamatanTerdampak: 2,
      jiwaTerdampak: 7118,
      catatan: "2 kecamatan, 7.118 jiwa terdampak."
    }
  },
  {
    name: "Kab. Mandailing Natal",
    province: "Sumatera Utara",
    lat: 0.7539,
    lng: 99.254,
    incidentType: "Banjir & Longsor",
    date: "26-11-2025",
    deaths: 0,
    missing: 0,
    injured: 0,
    displaced: 1378,
    affected: 1378,
    severity: "medium",
    details: {
      kecamatanTerdampak: 8,
      jiwaMengungsi: 1378,
      rumahRusakBerat: 18,
      lahanSawahHaTerdampak: 94,
      jembatanRusak: 1,
      catatan: "8 kecamatan terdampak; 1.378 jiwa mengungsi; 18 rumah rusak berat, 94 ha sawah terdampak, 1 jembatan rusak."
    }
  },

  // =========================
  // SUMATERA BARAT
  // =========================
  {
    name: "Kab. Agam",
    province: "Sumatera Barat",
    lat: -0.22,
    lng: 100.17,
    incidentType: "Banjir",
    date: "23-11-2025",
    deaths: 74,
    missing: 4,
    injured: 0,
    displaced: 484,
    affected: 634,
    severity: "critical",
    details: {
      kecamatanTerdampak: 16,
      jiwaTerdampak: 634,
      jiwaMengungsi: 484,
      catatan: "16 kecamatan terdampak; 74 jiwa meninggal, 4 hilang, 634 jiwa terdampak, 484 jiwa mengungsi."
    }
  },
  {
    name: "Kab. Pasaman Barat",
    province: "Sumatera Barat",
    lat: 0.12,
    lng: 99.66,
    incidentType: "Banjir",
    date: "27-11-2025",
    deaths: 1,
    missing: 6,
    injured: 1,
    displaced: 1491,
    affected: 1491,
    severity: "medium",
    details: {
      kecamatanTerdampak: 10,
      jiwaMengungsi: 1491,
      catatan: "10 kecamatan terdampak; 1 meninggal, 6 hilang, 1 luka-luka, 1.491 jiwa mengungsi."
    }
  },
  {
    name: "Kab. Lima Puluh Kota",
    province: "Sumatera Barat",
    lat: -0.01,
    lng: 100.65,
    incidentType: "Banjir",
    date: "24-11-2025",
    deaths: 0,
    missing: 0,
    injured: 0,
    displaced: 302,
    affected: 302,
    severity: "medium",
    details: {
      kecamatanTerdampak: 3,
      nagariTerdampak: 4,
      jiwaMengungsi: 302,
      rumahTerdampak: 283,
      catatan: "3 kecamatan, 4 nagari terdampak; 302 jiwa mengungsi, 283 rumah terdampak."
    }
  },
  {
    name: "Kota Bukittinggi",
    province: "Sumatera Barat",
    lat: -0.3058,
    lng: 100.3692,
    incidentType: "Banjir",
    date: "27-11-2025",
    deaths: 1,
    missing: 0,
    injured: 0,
    displaced: 68,
    affected: 68,
    severity: "medium",
    details: {
      kecamatanTerdampak: 1,
      jiwaTerdampak: 68,
      jiwaMengungsi: 68,
      catatan: "1 kecamatan terdampak; 1 jiwa meninggal, 68 jiwa terdampak."
    }
  },
  {
    name: "Kab. Padang Pariaman (Banjir)",
    province: "Sumatera Barat",
    lat: -0.5515,
    lng: 100.2151,
    incidentType: "Banjir",
    date: "23-11-2025",
    deaths: 0,
    missing: 1,
    injured: 0,
    displaced: 3208,
    affected: 10575,
    severity: "high",
    details: {
      kecamatanTerdampak: 11,
      nagariTerdampak: 42,
      jiwaMengungsi: 3208,
      jiwaTerdampak: 10575,
      rumahTerdampak: 3450,
      rumahRusak: 17,
      rumahHanyut: 3,
      fasumTerdampak: 1,
      fasdikRusak: 3,
      fasdikTerdampak: 3,
      kebunHaRusak: 106.25,
      sawahHaRusak: 341,
      titikJalanTerdampak: 10,
      bendunganRusak: 1,
      jembatanTerdampak: 9,
      catatan: "11 kecamatan, 42 nagari terdampak; 1 jiwa hanyut; kerusakan besar pada ribuan rumah, lahan pertanian, jalan, jembatan, dan bendungan."
    }
  },
  {
    name: "Kab. Padang Pariaman (Longsor)",
    province: "Sumatera Barat",
    lat: -0.5515,
    lng: 100.2151,
    incidentType: "Longsor",
    date: "22-11-2025",
    deaths: 0,
    missing: 1,
    injured: 1,
    displaced: 0,
    affected: 0,
    severity: "medium",
    details: {
      kecamatanTerdampak: 13,
      jiwaHilang: 1,
      jiwaLukaLuka: 1,
      aksesJalanTerdampak: 8,
      jalanRusak: 2,
      taludRusak: 1,
      saluranIrigasiRusak: 1,
      fasdikTerdampak: 1,
      jembatanRusak: 2,
      bendunganRusak: 1,
      catatan: "Longsor di 13 kecamatan; kerusakan pada akses jalan, jembatan, talud, irigasi, dan bendungan."
    }
  },
  {
    name: "Kab. Padang Panjang",
    province: "Sumatera Barat",
    lat: -0.4707,
    lng: 100.4059,
    incidentType: "Banjir",
    date: "27-11-2025",
    deaths: 7,
    missing: 0,
    injured: 7,
    displaced: 415,
    affected: 415,
    severity: "high",
    details: {
      kecamatanTerdampak: 2,
      jiwaMengungsi: 415,
      catatan: "2 kecamatan terdampak; 7 jiwa meninggal, 7 luka-luka, 415 jiwa mengungsi."
    }
  },
  {
    name: "Kab. Pesisir Selatan",
    province: "Sumatera Barat",
    lat: -1.3380833650479302,
    lng: 100.56872628138287,
    incidentType: "Banjir",
    date: "23-11-2025",
    deaths: 1,
    missing: 1,
    injured: 0,
    displaced: 49476,
    affected: 49476,
    severity: "high",
    details: {
      kecamatanTerdampak: 9,
      nagariTerdampak: 55,
      jiwaTerdampak: 49476,
      rumahTerdampak: 11630,
      fasdikTerdampak: 2,
      fasahidTerdampak: 1,
      rumahIbadahTerdampak: 1,
      jembatanTerdampak: 1,
      panjangJalanMtrTerdampak: 1400,
      catatan: "9 kecamatan, 55 nagari terdampak; 1 jiwa meninggal, 1 hilang; 49.476 jiwa terdampak, 11.630 rumah terdampak, kerusakan pada fasilitas umum dan jalan."
    }
  },
  {
    name: "Kab. Tanah Datar",
    province: "Sumatera Barat",
    lat: -0.47,
    lng: 100.62,
    incidentType: "Longsor",
    date: "21-11-2025",
    deaths: 2,
    missing: 2,
    injured: 4,
    displaced: 30,
    affected: 30,
    severity: "medium",
    details: {
      kecamatanTerdampak: 10,
      jiwaMengungsi: 30,
      catatan: "10 kecamatan terdampak; 2 meninggal, 2 hilang, 4 luka-luka, 30 jiwa mengungsi."
    }
  },
  {
    name: "Kab. Kepulauan Mentawai",
    province: "Sumatera Barat",
    lat: -2.08,
    lng: 99.62,
    incidentType: "Banjir",
    date: "27-11-2025",
    deaths: 1,
    missing: 0,
    injured: 0,
    displaced: 1059,
    affected: 1059,
    severity: "low",
    details: {
      kecamatanTerdampak: 6,
      jiwaMengungsi: 1059,
      rumahTerdampak: 1059,
      catatan: "6 kecamatan terdampak; 1 meninggal, 1.059 jiwa mengungsi dan 1.059 rumah terdampak."
    }
  },
  {
    name: "Kota Padang",
    province: "Sumatera Barat",
    lat: -0.9492,
    lng: 100.3548,
    incidentType: "Banjir",
    date: "25-11-2025",
    deaths: 5,
    missing: 0,
    injured: 0,
    displaced: 18208,
    affected: 18208,
    severity: "high",
    details: {
      kecamatanTerdampak: 7,
      kkTerdampak: 50,
      jiwaMengungsi: 18208,
      catatan: "7 kecamatan terdampak; 5 jiwa meninggal, 50 KK terdampak, 18.208 jiwa mengungsi."
    }
  },
  {
    name: "Kota Solok",
    province: "Sumatera Barat",
    lat: -0.8,
    lng: 100.65,
    incidentType: "Banjir",
    date: "27-11-2025",
    deaths: 1,
    missing: 0,
    injured: 0,
    displaced: 3747,
    affected: 3747,
    severity: "medium",
    details: {
      kecamatanTerdampak: 2,
      jiwaTerdampak: 3747,
      rumahTerdampak: 722,
      catatan: "2 kecamatan terdampak; 1 jiwa meninggal, 3.747 jiwa terdampak, 722 rumah terdampak."
    }
  }
];

        // =========================
        // KONFIGURASI POLIGON KAB/KOTA (GEOJSON dari GitHub)
        // =========================
        const regencyPolygonsConfig = [
          // Provinsi Aceh (11)
          {
            name: "SIMEULUE",
            province: "Aceh",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1101.geojson"
          },
          {
            name: "ACEH SINGKIL",
            province: "Aceh",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1102.geojson"
          },
          {
            name: "ACEH SELATAN",
            province: "Aceh",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1103.geojson"
          },
          {
            name: "ACEH TENGGARA",
            province: "Aceh",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1104.geojson"
          },
          {
            name: "ACEH TIMUR",
            province: "Aceh",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1105.geojson"
          },
          {
            name: "ACEH TENGAH",
            province: "Aceh",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1106.geojson"
          },
          {
            name: "ACEH BARAT",
            province: "Aceh",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1107.geojson"
          },
          {
            name: "ACEH BESAR",
            province: "Aceh",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1108.geojson"
          },
          {
            name: "PIDIE",
            province: "Aceh",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1109.geojson"
          },
          {
            name: "BIREUEN",
            province: "Aceh",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1110.geojson"
          },
          {
            name: "ACEH UTARA",
            province: "Aceh",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1111.geojson"
          },
          {
            name: "ACEH BARAT DAYA",
            province: "Aceh",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1112.geojson"
          },
          {
            name: "GAYO LUES",
            province: "Aceh",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1113.geojson"
          },
          {
            name: "ACEH TAMIANG",
            province: "Aceh",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1114.geojson"
          },
          {
            name: "NAGAN RAYA",
            province: "Aceh",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1115.geojson"
          },
          {
            name: "ACEH JAYA",
            province: "Aceh",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1116.geojson"
          },
          {
            name: "BENER MERIAH",
            province: "Aceh",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1117.geojson"
          },

          // Kota di Aceh
          {
            name: "BANDA ACEH",
            province: "Aceh",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1171.geojson"
          },
          {
            name: "SABANG",
            province: "Aceh",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1172.geojson"
          },
          {
            name: "LANGSA",
            province: "Aceh",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1173.geojson"
          },
          {
            name: "LHOKSEUMAWE",
            province: "Aceh",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1174.geojson"
          },

          // Provinsi Sumatera Utara (12)
          {
            name: "NIAS",
            province: "Sumatera Utara",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1201.geojson"
          },
          {
            name: "MANDAILING NATAL",
            province: "Sumatera Utara",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1202.geojson"
          },
          {
            name: "TAPANULI SELATAN",
            province: "Sumatera Utara",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1203.geojson"
          },
          {
            name: "TAPANULI TENGAH",
            province: "Sumatera Utara",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1204.geojson"
          },
          {
            name: "TAPANULI UTARA",
            province: "Sumatera Utara",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1205.geojson"
          },
          {
            name: "TOBA SAMOSIR",
            province: "Sumatera Utara",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1206.geojson"
          },
          {
            name: "LABUHAN BATU",
            province: "Sumatera Utara",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1207.geojson"
          },
          {
            name: "ASAHAN",
            province: "Sumatera Utara",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1208.geojson"
          },
          {
            name: "SIMALUNGUN",
            province: "Sumatera Utara",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1209.geojson"
          },
          {
            name: "DAIRI",
            province: "Sumatera Utara",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1210.geojson"
          },
          {
            name: "KARO",
            province: "Sumatera Utara",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1211.geojson"
          },
          {
            name: "DELI SERDANG",
            province: "Sumatera Utara",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1212.geojson"
          },
          {
            name: "LANGKAT",
            province: "Sumatera Utara",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1213.geojson"
          },
          {
            name: "NIAS SELATAN",
            province: "Sumatera Utara",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1214.geojson"
          },
          {
            name: "HUMBANG HASUNDUTAN",
            province: "Sumatera Utara",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1215.geojson"
          },
          {
            name: "PAKPAK BHARAT",
            province: "Sumatera Utara",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1216.geojson"
          },
          {
            name: "SAMOSIR",
            province: "Sumatera Utara",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1217.geojson"
          },
          {
            name: "SERDANG BEDAGAI",
            province: "Sumatera Utara",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1218.geojson"
          },

          // Kota di Sumatera Utara
          {
            name: "SIBOLGA",
            province: "Sumatera Utara",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1271.geojson"
          },
          {
            name: "TANJUNG BALAI",
            province: "Sumatera Utara",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1272.geojson"
          },
          {
            name: "PEMATANG SIANTAR",
            province: "Sumatera Utara",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1273.geojson"
          },
          {
            name: "TEBING TINGGI",
            province: "Sumatera Utara",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1274.geojson"
          },
          {
            name: "MEDAN",
            province: "Sumatera Utara",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1275.geojson"
          },
          {
            name: "BINJAI",
            province: "Sumatera Utara",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1276.geojson"
          },
          {
            name: "KOTA PADANG SIDEMPUAN",
            province: "Sumatera Utara",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1277.geojson"
          },

          // Provinsi Sumatera Barat (13)
          {
            name: "KEPULAUAN MENTAWAI",
            province: "Sumatera Barat",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1301.geojson"
          },
          {
            name: "PESISIR SELATAN",
            province: "Sumatera Barat",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1302.geojson"
          },
          {
            name: "SOLOK",
            province: "Sumatera Barat",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1303.geojson"
          },
          {
            name: "SIJUNJUNG",
            province: "Sumatera Barat",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1304.geojson"
          },
          {
            name: "TANAH DATAR",
            province: "Sumatera Barat",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1305.geojson"
          },
          {
            name: "PADANG PARIAMAN",
            province: "Sumatera Barat",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1306.geojson"
          },
          {
            name: "AGAM",
            province: "Sumatera Barat",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1307.geojson"
          },
          {
            name: "LIMA PULUH KOTA",
            province: "Sumatera Barat",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1308.geojson"
          },
          {
            name: "PASAMAN",
            province: "Sumatera Barat",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1309.geojson"
          },
          {
            name: "SOLOK SELATAN",
            province: "Sumatera Barat",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1310.geojson"
          },
          {
            name: "DHARMASRAYA",
            province: "Sumatera Barat",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1311.geojson"
          },
          {
            name: "PASAMAN BARAT",
            province: "Sumatera Barat",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1312.geojson"
          },
          // Kota di Sumatera Barat
          {
            name: "PADANG",
            province: "Sumatera Barat",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1371.geojson"
          },
          {
            name: "SOLOK",
            province: "Sumatera Barat",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1372.geojson"
          },
          {
            name: "SAWAH LUNTO",
            province: "Sumatera Barat",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1373.geojson"
          },
          {
            name: "PADANG PANJANG",
            province: "Sumatera Barat",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1374.geojson"
          },
          {
            name: "BUKITTINGGI",
            province: "Sumatera Barat",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1375.geojson"
          },
          {
            name: "PAYAKUMBUH",
            province: "Sumatera Barat",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1376.geojson"
          },
          {
            name: "PARIAMAN",
            province: "Sumatera Barat",
            color: "#c9c9c9",
            url: "https://raw.githubusercontent.com/yusufsyaifudin/wilayah-indonesia/refs/heads/master/data/geojson/regency/1377.geojson"
          }
        ];

        // =========================
        // DATA KAMPUS POSKO (untuk circle per kab/kota)
        // =========================
        const campusContribution = {
  // Aceh
  "PIDIE": 5,
  "BIREUEN": 5,
  "PIDIE JAYA": 5,
  "LHOKSEUMAWE": 3,
  "ACEH BARAT": 3,
  "NAGAN RAYA": 2,
  "ACEH SINGKIL": 2,
  "ACEH TIMUR": 2,
  "ACEH TENGAH": 2,
  "ACEH UTARA": 2,
  "BENER MERIAH": 2,
  "ACEH TENGGARA": 1,
  "SINGKIL": 1,
  "GAYO LUES": 1,
  "ACEH JAYA": 1,
  "LANGSA": 1,
  "ACEH SELATAN": 1,
  "SUBULUSSALAM": 1,
  "ACEH BESAR": 1,
  "BANDA ACEH": 1,

  // Sumbar
  "AGAM": 3,
  "BUKITTINGGI": 1,
  "PADANG": 5,
  "PADANG PANJANG": 3,
  "PADANG PARIAMAN": 2,
  "PARIAMAN": 1,
  "PASAMAN BARAT": 1,
  "PESISIR SELATAN": 1,
  "SOLOK": 1,
  "SOLOK SELATAN": 1,
  "TANAH DATAR": 2,

  // Sumut
  "BELAWAN": 1,
  "BINJAI": 1,
  "DELI SERDANG": 3,
  "HUMBANG HASUNDUTAN": 1,
  "LANGKAT": 3,
  "MANDAILING NATAL": 1,
  "MEDAN": 4,
  "PEMATANG SIANTAR": 1,
  "SIBOLGA": 1,
  "SIMALUNGUN": 1,
  "TAPANULI SELATAN": 3,
  "TAPANULI TENGAH": 2,
  "TAPANULI UTARA": 1
};

        // Helper: ambil jumlah kampus posko per kab/kota
        function getCampusCountByRegion(regionName) {
            if (!regionName) return 0;

            const key = regionName.toUpperCase().trim();

            // Cocok langsung
            if (campusContribution.hasOwnProperty(key)) {
                return campusContribution[key];
            }

            // Hilangkan prefix "KOTA "
            const keyNoKota = key.replace(/^KOTA\\s+/, '');
            if (campusContribution.hasOwnProperty(keyNoKota)) {
                return campusContribution[keyNoKota];
            }

            return 0;
        }

        // Helper: radius & warna circle berdasarkan jumlah kampus
        function getCampusCircleStyle(count) {
            if (!count || count <= 0) return null;

            const baseRadius = 5000;      // 5 km
            const extraPerCampus = 1000;   // +1 km per kampus
            const radius = baseRadius + (count * extraPerCampus);

            let color = '#0ea5e9'; // default biru
            if (count >= 10) {
                color = '#1d4ed8';
            } else if (count >= 5) {
                color = '#2563eb';
            }

            return { radius, color };
        }

        // Data lokasi kampus (contoh posko utama)
        const campusLocations = [
            // SUMATERA BARAT
            { name: "Universitas Andalas", province: "Sumatera Barat", city: "Kota Padang", status: "PTN", lat: -0.914301, lng: 100.458865 },
            { name: "Universitas Negeri Padang", province: "Sumatera Barat", city: "Kota Padang", status: "PTN", lat: -0.925328, lng: 100.463769 },
            { name: "Institut Seni Indonesia Padang Panjang", province: "Sumatera Barat", city: "Kota Padang Panjang", status: "PTN", lat: -0.459029, lng: 100.403327 },
            { name: "Politeknik Negeri Padang", province: "Sumatera Barat", city: "Kota Padang", status: "PTN", lat: -0.913586, lng: 100.466376 },
            
            // ACEH
            { name: "Universitas Syiah Kuala", province: "Aceh", city: "Kota Banda Aceh", status: "PTN", lat: 5.570421, lng: 95.369948 },
            { name: "Universitas Malikussaleh", province: "Aceh", city: "Kab. Aceh Utara", status: "PTN", lat: 5.234293, lng: 96.983868 },
            { name: "Universitas Samudra", province: "Aceh", city: "Kota Langsa", status: "PTN", lat: 4.457623, lng: 97.971968 },
            { name: "Politeknik Negeri Lhokseumawe", province: "Aceh", city: "Kota Lhokseumawe", status: "PTN", lat: 5.119343, lng: 97.156274 },
            { name: "Universitas Teuku Umar", province: "Aceh", city: "Kab. Aceh Barat", status: "PTN", lat: 4.143974, lng: 96.202127 },
            { name: "Universitas Muhammadiyah Aceh", province: "Aceh", city: "Kota Banda Aceh", status: "PTS", lat: 5.535384179207771, lng: 95.33228381072688 },
            { name: "Universitas Muhammadiyah Mahakarya Aceh", province: "Aceh", city: "Kab. Bireun", status: "PTS", lat: 5.2008139640941655, lng: 96.70265124141672 },

            // SUMATERA UTARA
            { name: "Universitas Sumatera Utara", province: "Sumatera Utara", city: "Kota Medan", status: "PTN", lat: 3.561515, lng: 98.656428 },
            { name: "Universitas Negeri Medan", province: "Sumatera Utara", city: "Kota Medan", status: "PTN", lat: 3.589123, lng: 98.678912 },
            { name: "Politeknik Negeri Medan", province: "Sumatera Utara", city: "Kota Medan", status: "PTN", lat: 3.562829, lng: 98.653523 },
            { name: "Politeknik Pertanian Negeri Payakumbuh", province: "Sumatera Barat", city: "Kab. Lima Puluh Kota", status: "PTN", lat: -0.16945368771192676, lng: 100.66465275862649 },

            // JAMBI
            { name: "Univeritas Jambi", province: "Jambi", city: "Kota Jambi", status: "PTN", lat: -1.610761595641745, lng: 103.51691506902127 }
        ];

        // =========================
        // INISIALISASI PETA
        // =========================
        const map = L.map('map').setView([2.5, 98.5], 7);

        L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; OpenStreetMap contributors & CARTO',
            maxZoom: 19,
            minZoom: 6
        }).addTo(map);

        // Layer group khusus untuk circle sebaran kampus posko
        const campusCirclesLayer = L.layerGroup().addTo(map);

        function getSeverityColor(severity) {
            switch(severity) {
                case 'critical': return '#dc2626';
                case 'high':     return '#f97316';
                case 'medium':   return '#fbbf24';
                case 'low':      return '#42bd3e';
                default:         return '#6b7280';
            }
        }

        function getSeverityLabel(severity) {
            switch(severity) {
                case 'critical': return 'Kritis';
                case 'high':     return 'Tinggi';
                case 'medium':   return 'Sedang';
                case 'low':      return 'Rendah';
                default:         return 'Tidak diketahui';
            }
        }

        // Helper: cari data bencana yang match dengan konfigurasi polygon
        function findDisasterForConfig(cfg) {
            const targetName = (cfg.name || '').toLowerCase();
            if (!targetName) return null;

            return disasterLocations.find(d => {
                const dn = d.name.toLowerCase();
                return dn.includes(targetName) || targetName.includes(dn);
            }) || null;
        }

        // =========================
        // POLYGON KAB/KOTA (GEOJSON) DENGAN WARNA SESUAI SEVERITY
        // + CIRCLE KAMPUS KONTRIBUSI
        // =========================
        regencyPolygonsConfig.forEach(cfg => {
            fetch(cfg.url)
                .then(resp => resp.json())
                .then(geojson => {
                    const layer = L.geoJSON(geojson, {
                        style: function(feature) {
                            const disaster = findDisasterForConfig(cfg);
                            const severity = disaster ? disaster.severity : null;

                            const color = severity
                                ? getSeverityColor(severity)
                                : (cfg.color || '#22c55e');

                            return {
                                color: color,
                                weight: 2,
                                opacity: 0.9,
                                fillColor: color,
                                fillOpacity: 0.15
                            };
                        },
                        onEachFeature: function(feature, layer) {
                            const disaster = findDisasterForConfig(cfg);

                            if (disaster) {
                                const popupHtml = `
                                    <div class="popup-title">${disaster.name}</div>
                                    <div class="popup-detail">
                                        <span class="popup-label">Provinsi:</span>
                                        <span class="popup-value">${disaster.province}</span>
                                    </div>
                                    <div class="popup-detail">
                                        <span class="popup-label">Korban Meninggal:</span>
                                        <span class="popup-value">${disaster.deaths} jiwa</span>
                                    </div>
                                    <div class="popup-detail">
                                        <span class="popup-label">Korban Hilang:</span>
                                        <span class="popup-value">${disaster.missing} jiwa</span>
                                    </div>
                                    <div class="popup-detail">
                                        <span class="popup-label">Perkiraan Terdampak:</span>
                                        <span class="popup-value">${disaster.displaced.toLocaleString()} jiwa</span>
                                    </div>
                                    <div class="severity-badge severity-${disaster.severity}">
                                        ${getSeverityLabel(disaster.severity)}
                                    </div>
                                `;
                                layer.bindPopup(popupHtml);
                            } else {
                                const props = feature.properties || {};
                                const name = props.name || cfg.name || 'Kabupaten/Kota';
                                const popupHtml = `
                                    <div class="popup-title">${name}</div>
                                    <div class="popup-detail">
                                        <span class="popup-label">Provinsi:</span>
                                        <span class="popup-value">${cfg.province || '-'}</span>
                                    </div>
                                    <div class="popup-detail">
                                        <span class="popup-label">Tipe:</span>
                                        <span class="popup-value">Poligon batas kabupaten/kota</span>
                                    </div>
                                `;
                                layer.bindPopup(popupHtml);
                            }
                        }
                    }).addTo(map);

                    console.log('✅ Poligon ter-load untuk:', cfg.name);
                })
                .catch(err => {
                    console.error('❌ Gagal memuat GeoJSON untuk', cfg.name, err);
                });
        });

        // =========================
        // MARKER + RADIUS KAMPUS POSKO (BERDASARKAN campusLocations)
        // =========================
        // ===== KAMPUS MARKERS =====
        const campusMarkers = [];

        const campusIcon = L.divIcon({
            className: 'custom-campus-icon',
            html: `<div style="
                width: 7px;
                height: 7px;
                background: #160b54;
                border: 1px solid white;
                box-shadow: 0 1px 2px rgba(0,0,0,0.4);
                cursor: pointer;
            "></div>`,
            iconSize: [16, 16],
            iconAnchor: [8, 8]
        });

        campusLocations.forEach((campus, index) => {
            const popupContent = `
                <div class="popup-title">${campus.name}</div>
                <div class="popup-detail">
                    <span class="popup-label">Status:</span>
                    <span class="popup-value">${campus.status}</span>
                </div>
                <div class="popup-detail">
                    <span class="popup-label">Kota/Kab:</span>
                    <span class="popup-value">${campus.city}</span>
                </div>
                <div class="popup-detail">
                    <span class="popup-label">Provinsi:</span>
                    <span class="popup-value">${campus.province}</span>
                </div>
            `;

            const marker = L.marker([campus.lat, campus.lng], { icon: campusIcon })
                .bindPopup(popupContent, {
                    maxWidth: 300,
                    closeButton: true
                })
                .addTo(map);

            campusMarkers.push({ campus, marker });
        });


        // NOTE: asumsi campusLocations sudah didefinisikan di tempat lain
        campusLocations.forEach((campus, index) => {
            const campusIcon = L.divIcon({
                className: 'custom-campus-icon',
                html: `<div style="
                    width: 12px;
                    height: 12px;
                    background: ${campus.color || '#111827'};
                    border-radius: 2px;
                    border: 1px solid white;
                    box-shadow: 0 1px 2px rgba(0,0,0,0.4);
                    cursor: pointer;
                "></div>`,
                iconSize: [16, 16],
                iconAnchor: [8, 8]
            });

            const popupContent = `
                <div class="popup-title">${campus.name}</div>
                <div class="popup-detail">
                    <span class="popup-label">Status:</span>
                    <span class="popup-value">${campus.status}</span>
                </div>
                <div class="popup-detail">
                    <span class="popup-label">Kota/Kab:</span>
                    <span class="popup-value">${campus.city}</span>
                </div>
                <div class="popup-detail">
                    <span class="popup-label">Provinsi:</span>
                    <span class="popup-value">${campus.province}</span>
                </div>
            `;

            const marker = L.marker([campus.lat, campus.lng], { icon: campusIcon })
                .bindPopup(popupContent, {
                    maxWidth: 360,
                    closeButton: true
                })
                .addTo(map);

            campusMarkers.push({ campus, marker, coverageCircle });
        });

        // =========================
        // PENCARIAN KAMPUS POSKO
        // =========================
        const searchInput = document.getElementById('campus-search-input');
        const searchResultsContainer = document.getElementById('campus-search-results');

        function clearSearchResults() {
            searchResultsContainer.innerHTML = '';
        }

        function renderSearchResults(results) {
            if (!results.length) {
                searchResultsContainer.innerHTML =
                    '<div class="search-result-item search-result-empty">Tidak ada hasil</div>';
                return;
            }

            const html = results.slice(0, 30).map(({ campus, index }) => `
                <div class="search-result-item" data-index="${index}">
                    <div class="search-result-name">${campus.name}</div>
                    <div class="search-result-meta">
                        ${campus.city} • ${campus.province} • ${campus.status}
                    </div>
                </div>
            `).join('');

            searchResultsContainer.innerHTML = html;
        }

        searchInput.addEventListener('input', (e) => {
            const q = e.target.value.trim().toLowerCase();

            if (!q) {
                clearSearchResults();
                return;
            }

            const results = campusMarkers
                .map((item, index) => ({ ...item, index }))
                .filter(({ campus }) =>
                    (campus.name && campus.name.toLowerCase().includes(q)) ||
                    (campus.city && campus.city.toLowerCase().includes(q)) ||
                    (campus.province && campus.province.toLowerCase().includes(q))
                );

            renderSearchResults(results);
        });

        searchResultsContainer.addEventListener('click', (e) => {
            const itemEl = e.target.closest('.search-result-item');
            if (!itemEl || itemEl.classList.contains('search-result-empty')) return;

            const index = parseInt(itemEl.dataset.index, 10);
            const { campus, marker } = campusMarkers[index];

            map.setView([campus.lat, campus.lng], 9);
            marker.openPopup();
            clearSearchResults();
        });

        searchInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                const firstResult = searchResultsContainer.querySelector('.search-result-item:not(.search-result-empty)');
                if (!firstResult) return;

                const index = parseInt(firstResult.dataset.index, 10);
                const { campus, marker } = campusMarkers[index];

                map.setView([campus.lat, campus.lng], 9);
                marker.openPopup();
                clearSearchResults();
            }
        });

        // Scale control
        L.control.scale({
            imperial: false,
            metric: true,
            position: 'bottomleft'
        }).addTo(map);

        console.log('✅ Map loaded successfully!');
        console.log('📍 Markers (bencana):', disasterLocations.length);
        console.log('🎓 Markers (kampus posko):', campusLocations.length);
    </script>
</body>
</html>
